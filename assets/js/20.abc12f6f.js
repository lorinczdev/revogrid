(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{377:function(e,t,o){"use strict";o.r(t),o.d(t,"revo_dropdown",(function(){return d})),o.d(t,"revo_list",(function(){return a}));var i=o(341);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){let t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});function r(e,t){return t?e[t]:e}function s(e,t){return t?e[t]:e}const n=e=>{const t=t=>{const o=function(e,t){var o;let i=[];const s=null===(o=null==t?void 0:t.trim())||void 0===o?void 0:o.toLocaleLowerCase();if(s)for(let t of e.source){let o=r(t,e.dataLabel);if("string"==typeof o)switch(o=o.toLocaleLowerCase(),e.filter){case"start":0===o.indexOf(s)&&i.push(t);break;default:o.indexOf(s)>-1&&i.push(t)}}else i=e.source;return i}(e,t);e.onFilterChange({value:t,items:o})};return e.filter||(e.filter="contains"),t(e.filterValue),e.autocomplete&&(e.value=e.filterValue),Object(i.d)("input",Object.assign({class:{"filter-box":!0},type:"text"},e,{onClick:t=>{t.preventDefault(),e.onClick&&e.onClick(t)},onInput:o=>{var i;e.onInput&&e.onInput();const r=null===(i=o.currentTarget)||void 0===i?void 0:i.value;t(r)}}))},l=()=>Object(i.d)("span",{class:"arrow-wrapper"},Object(i.d)("svg",{class:"arrow","aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},Object(i.d)("path",{fill:"currentColor",d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"}))),d=class{constructor(e){Object(i.f)(this,e),this.changeValue=Object(i.c)(this,"changeValue",7),this.close=Object(i.c)(this,"close",7),this.open=Object(i.c)(this,"open",7),this.uuid="",this.isClosing=!1,this.currentItem=null,this.isVisible=!1,this.autoClose=!0,this.source=[],this.placeholder="Select",this.appendTo="body",this.hasFilter=!0,this.autocomplete=!1,this.autoFocus=!1}async doClose(e=!1){if(!e){if(this.close.emit().defaultPrevented)return}this.isClosing=!0,this.isVisible=!1}async doOpen(){this.open.emit().defaultPrevented||(this.isVisible=!0)}async doChange(e,t){this.value=e,this.changeValue.emit({val:e,originalEvent:t}),this.autocompleteInput&&(this.autocompleteInput.value=r(this.currentItem,this.dataLabel)),this.autoClose&&this.isVisible&&this.doClose()}onMouseUp(e){var t;if(this.isVisible&&!e.defaultPrevented){!(null===(t=e.target)||void 0===t?void 0:t.closest(`[uuid="${this.uuid}"]`))&&this.doClose()}}onKey(e){switch(e.code){case"Escape":e.preventDefault(),this.doClose()}}onValueChanged(e){this.currentItem=this.getValue(e)}componentWillLoad(){this.value&&(this.currentItem=this.value)}connectedCallback(){this.uuid=(new Date).getTime()+"-rvdropdown",void 0!==this.value&&this.onValueChanged(this.value)}disconnectedCallback(){this.doClose(!0)}componentDidRender(){this.dropdown&&"body"===this.appendTo&&document.body.appendChild(this.dropdown),this.isVisible&&this.updateStyles(),this.dropdownInput&&this.dropdownInput.focus(),this.autoFocus&&this.autocomplete&&setTimeout(()=>{var e;return null===(e=this.autocompleteInput)||void 0===e?void 0:e.focus()},0)}renderDropdown(){return Object(i.d)("div",Object.assign({},{uuid:this.uuid},{class:"revo-dropdown-list",ref:e=>this.dropdown=e}),Object(i.d)("div",{class:"dropdown-inner",ref:e=>this.dropdownInner=e},this.hasFilter&&!this.autocomplete?Object(i.d)(n,{ref:e=>this.dropdownInput=e,source:this.source,filter:this.filter,dataLabel:this.dataLabel,value:this.currentFilter||"",filterValue:this.currentFilter||"",onFilterChange:e=>{var t;this.currentFilter=e.value,this.currentSource=e.items,null===(t=this.revoList)||void 0===t||t.refresh(this.currentSource)}}):void 0,Object(i.d)("revo-list",{ref:e=>this.revoList=e,isFocused:!0,sourceItems:this.currentSource,dataLabel:this.dataLabel,onDoChange:e=>this.doChange(e.detail.item,e.detail.e)})))}renderSelect(){const e=this.currentItem&&r(this.currentItem,this.dataLabel)||"";return Object(i.d)("input",{type:"text",disabled:!0,class:"filter-box",value:e})}renderAutocomplete(){const e=this.currentItem?r(this.currentItem,this.dataLabel):"";return Object(i.d)(n,{ref:e=>this.autocompleteInput=e,autocomplete:"true",source:this.source,filter:this.filter,dataLabel:this.dataLabel,value:e,filterValue:this.currentFilter,onKeyDown:e=>{if(!this.isVisible)switch(e.code){case"ArrowUp":case"ArrowDown":e.preventDefault(),this.showAutoComplete()}},onInput:()=>this.showAutoComplete(),onFocus:()=>this.showAutoComplete(),onClick:()=>this.showAutoComplete(),onFilterChange:e=>{var t;this.currentFilter=e.value,this.currentSource=e.items,null===(t=this.revoList)||void 0===t||t.refresh(this.currentSource)}})}render(){var e;let t;this.isVisible&&(t=this.renderDropdown());const o={uuid:this.uuid,class:{active:this.isVisible,shrink:this.isVisible||!!this.currentItem||!!(null===(e=this.autocompleteInput)||void 0===e?void 0:e.value)},ref:e=>this.element=e,onClick:e=>this.selectClick(e)};return this.autocomplete&&(o.autocomplete=!0),Object(i.d)(i.a,Object.assign({},o),Object(i.d)("label",null,this.placeholder),Object(i.d)("div",{class:"rv-dr-root"},this.autocomplete?this.renderAutocomplete():this.renderSelect(),Object(i.d)("span",{class:"actions"},Object(i.d)(l,null)),Object(i.d)("fieldset",null,Object(i.d)("legend",null,Object(i.d)("span",null,this.placeholder)))),t)}showAutoComplete(){this.isVisible||this.isClosing||(this.isVisible=!0),this.isClosing=!1}getValue(e){for(let t in this.source){const o=this.source[t];if(e==s(o,this.dataId))return o}return null}selectClick(e){e.defaultPrevented||(this.isVisible?this.doClose():this.doOpen())}updateStyles(){if(!this.dropdown)return;const{top:e,left:t,height:o}=this.element.getBoundingClientRect(),i=this.clientRectangle();let r=e+o+i.top;const s={};r>i.centerY?(s.top=r-o+"px",s.maxHeight=r-o-i.top-50,this.dropdown.classList.add("top")):(s.top=r+"px",s.maxHeight=i.bottom-r-50,this.dropdown.classList.remove("top"));let n=t+i.left;const l=i.right-(n+this.dropdown.clientWidth);l<0&&(n+=l),s.left=n+"px",this.dropdownInner.style.maxHeight=Math.min(s.maxHeight,this.maxHeight||s.maxHeight)+"px",this.dropdownInner.style.maxWidth=s.maxWidth;for(let e in s)this.dropdown.style[e]=s[e]}clientRectangle(){const e={top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,bottom:0,centerY:0,height:document.body.clientHeight,left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,right:0,width:document.body.clientWidth,centerX:0};return e.bottom=e.top+e.height,e.right=e.left+e.width,e.centerY=e.top+e.height/2,e.centerX=e.left+e.width/2,e}static get watchers(){return{value:["onValueChanged"]}}};d.style='revo-dropdown{font-size:1em;font-family:"Roboto", "Helvetica", "Arial", sans-serif;font-weight:400;line-height:2em;letter-spacing:0.01em;display:inline-flex;flex-direction:column;vertical-align:top;padding:0;box-sizing:border-box;cursor:pointer;position:relative}revo-dropdown .rv-dr-root{padding:5px 9px;padding-right:35px;flex-wrap:wrap;position:relative;border-radius:4px;cursor:text;display:inline-flex;position:relative;font-size:1rem;box-sizing:border-box;align-items:center}revo-dropdown input.filter-box{padding-left:6px;padding:9.5px 4px;width:0;min-width:30px;flex-grow:1;text-overflow:ellipsis;border:0;height:1.1876em;margin:0;display:block;background:none;box-sizing:content-box;letter-spacing:inherit;animation-duration:10ms}revo-dropdown input.filter-box:focus{outline:none}revo-dropdown .actions{right:9px;top:calc(50% - $font-size);position:absolute}revo-dropdown label{font-size:1rem;z-index:1;top:0;left:0;position:absolute;display:block;transform-origin:top left;line-height:1;transition:color 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms;transform:translate(14px, 14px) scale(1);pointer-events:none}revo-dropdown fieldset{border-color:#ececec;top:-5px;left:0;right:0;bottom:0;margin:0;padding:0 8px;overflow:hidden;position:absolute;border-style:solid;border-width:1px;border-radius:inherit;pointer-events:none}revo-dropdown fieldset legend{width:auto;height:11px;display:block;padding:0;font-size:0.75em;max-width:0.01px;text-align:left;transition:max-width 50ms cubic-bezier(0, 0, 0.2, 1) 0ms;visibility:hidden}revo-dropdown fieldset legend>span{display:inline-block;padding-left:5px;padding-right:5px}revo-dropdown.shrink label{transform:translate(14px, -6px) scale(0.75)}revo-dropdown.shrink legend{max-width:1000px;transition:max-width 100ms cubic-bezier(0, 0, 0.2, 1) 50ms}revo-dropdown .arrow{width:9px;margin-top:5px;margin-left:5px;opacity:0.4}revo-dropdown .arrow-wrapper{width:15px;text-align:center}revo-dropdown.active label{color:#0089ff}revo-dropdown.active fieldset{border-color:#0089ff}.revo-dropdown-list{font-size:1em;font-family:"Roboto", "Helvetica", "Arial", sans-serif;font-weight:400;line-height:2em;letter-spacing:0.01em;position:absolute;transition:opacity 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 160ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;z-index:999}.revo-dropdown-list.top .dropdown-inner{bottom:2px;flex-direction:column-reverse}.revo-dropdown-list.top .dropdown-inner .filter-box{margin-bottom:0}.revo-dropdown-list:not(.top) .dropdown-inner{top:2px;flex-direction:column}.revo-dropdown-list:not(.top) .dropdown-inner .filter-box{margin-top:0}.revo-dropdown-list .dropdown-inner{display:flex;max-height:100%;position:absolute;padding:8px 0;box-sizing:border-box;min-height:16px;min-width:16px;box-shadow:0 0 14px 0 rgba(53, 64, 82, 0.05);border:1px solid rgba(0, 0, 0, 0.05);border-radius:4px;color:rgba(0, 0, 0, 0.87);overflow:hidden;background-color:#fff}.revo-dropdown-list .dropdown-inner .filter-box{border:1px solid #ececec;min-height:30px;line-height:30px;margin:10px;border-radius:6px}.revo-dropdown-list .dropdown-inner .filter-box:focus{outline:none;border-color:#0089ff}';const a=class{constructor(e){Object(i.f)(this,e),this.doChange=Object(i.c)(this,"doChange",3),this.currentItem=0,this.sourceItems=[],this.isFocused=!1}onKey(e){let t;if(this.isFocused)switch(e.code){case"ArrowUp":if(e.preventDefault(),this.currentItem<=0)return;this.currentItem--;break;case"ArrowDown":e.preventDefault(),this.sourceItems[this.currentItem+1]&&this.currentItem++;break;case"Tab":case"Enter":e.preventDefault(),t=this.sourceItems[this.currentItem],t&&this.doChange.emit({item:t,e:e})}}async refresh(e){this.sourceItems=e}componentDidRender(){var e;null===(e=this.selectedEl)||void 0===e||e.scrollIntoView({block:"nearest",inline:"nearest"})}render(){this.selectedEl=void 0;const e=[];for(let t in this.sourceItems){const o=this.sourceItems[t],s=parseInt(t)===this.currentItem,n={class:{selected:s},ref:e=>{s&&(this.selectedEl=e)},onClick:e=>this.doChange.emit({item:o,e:e})},l=Object(i.d)("li",Object.assign({},n),r(o,this.dataLabel));e.push(l)}return Object(i.d)("ul",null,e)}};a.style="revo-list{overflow-x:hidden;overflow-y:auto;max-height:100%;display:block}revo-list ul{margin:0;padding:0;outline:0;list-style:none}revo-list ul>li{width:auto;overflow:hidden;font-size:14px;box-sizing:border-box;min-height:48px;font-weight:400;line-height:1.5;padding-top:6px;white-space:nowrap;padding-bottom:6px;padding-left:16px;padding-right:16px;display:flex;position:relative;text-align:left;align-items:center;justify-content:flex-start;text-decoration:none;cursor:pointer}revo-list ul>li.selected{background-color:rgba(0, 0, 0, 0.04)}revo-list ul>li:hover{background-color:rgba(0, 0, 0, 0.04)}"}}]);