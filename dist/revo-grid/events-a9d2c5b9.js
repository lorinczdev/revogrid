/*!
 * Built by Revolist
 */
import{A as t,j as e,l as i}from"./index-a937c03b.js";function n(e,i,n,u,l){const a=t(l,e);const m=h(i);let d;if(m){let t=a.itemIndex-(m.itemIndex||0);if(t){d=f(Math.abs(t),Object.assign(Object.assign({positiveDirection:t>-1},l),i))}}const z=s(u,l.realSize,a);if(d){const t=o(a,n,z,d,l);if(t.length){r(d.items,t,d)}}if(!d){const t=c({firstItemStart:a.start,firstItemIndex:a.itemIndex,origSize:l.originItemSize,maxSize:z,maxCount:n,sizes:l.sizes});d={items:t,start:0,end:t.length-1}}return d}function s(t,e,i){return Math.min(t+(i.end-i.start),e)}function r(t,e,i){t.splice(i.end+1,0,...e);if(i.start>=i.end&&!(i.start===i.end&&i.start===0)){i.start+=e.length}i.end+=e.length}function o(t,e,i,n,s){const r=m(n);const o=c({sizes:s.sizes,firstItemStart:r.end,firstItemIndex:r.itemIndex+1,origSize:s.originItemSize,maxSize:i-(r.end-t.start),maxCount:e});return o}function c(t,e=0){const i=[];let n=t.firstItemIndex;let s=e;while(s<=t.maxSize&&n<t.maxCount){const e=u(n,t.sizes,t.origSize);i.push({start:t.firstItemStart+s,end:t.firstItemStart+s+e,itemIndex:n,size:e});s+=e;n++}return i}function f(t,e){const i=[...e.items];const n=i.length;let s={start:e.start,end:e.end};if(t>n){return null}if(e.positiveDirection){let r=m(e);let o=s.start;const c=o+t;for(;o<c;o++){const t=r.itemIndex+1;const c=u(t,e.sizes,e.originItemSize);if(r.end+c>e.realSize){break}let f=o%n;if(!i[f]){throw new Error("incorrect index")}i[f]=r={start:r.end,end:r.end+c,itemIndex:t,size:c};s.start++;s.end=f}}else{let r=h(e);const o=s.end;for(let c=0;c<t;c++){const t=r.itemIndex-1;const f=u(t,e.sizes,e.originItemSize);let l=o-c;l=(l<0?n+l:l)%n;if(!i[l]){throw new Error("incorrect index")}i[l]=r={start:r.start-f,end:r.start,itemIndex:t,size:f};s.start=l;s.end--}}const r={start:(s.start<0?n+s.start:s.start)%n,end:(s.end<0?n+s.end:s.end)%n};return Object.assign({items:i},r)}function u(t,e,i=0){if(e&&e[t]){return e[t]}return i}function l(t,e,i,n){if(!i||!n){return false}return t>=i.start&&t<=i.end||t>i.end&&n.end===e}function a(t,e,i,n){if(!i){return false}return e+t>(n===null||n===void 0?void 0:n.end)}function h(t){return t.items[t.start]}function m(t){return t.items[t.end]}function d(t,e,i,n){const s=[...t];const r=s.length;let o=n;let c=0;let f=e;if(!r){return[]}while(c<r){const t=s[f];t.start=o;t.size=i;t.end=t.start+i;o=t.end;f++;c++;if(f===r){f=0}}return s}function z(){return{items:[],start:0,end:0,virtualSize:0,realCount:0}}class x{get lastCoordinate(){return this.lastKnownScroll}set lastCoordinate(t){this.lastKnownScroll=t}constructor(t){this.type=t;this.lastKnownScroll=0;this.store=e(z());this.store.onChange("realCount",(()=>this.clearItems()));this.store.onChange("virtualSize",(()=>this.setViewport({items:[]})))}setViewPortCoordinate(t,e){const i=this.store.get("virtualSize");if(!i){return}const s=1;const c=e.originItemSize*s;const f=c*2;const u=i+f;let d=0;if(e.realSize>i){d=e.realSize-i-c}let z=t;if(z<0){z=0}else if(z>d){z=d}this.lastCoordinate=z;z-=c;z=z<0?0:z<d?z:d;const x=this.getItems();const b=h(x);const j=m(x);let I={};if(!l(z,e.realSize,b,j)){I=Object.assign(Object.assign({},I),n(z,x,this.store.get("realCount"),u,e));this.setViewport(Object.assign({},I))}else if(a(z,u,b,j)){const t=o(b,this.store.get("realCount"),u+z-b.start,x,e);if(t.length){const e=[...this.store.get("items")];const i={start:this.store.get("start"),end:this.store.get("end")};r(e,t,i);I=Object.assign(Object.assign(Object.assign({},I),{items:[...e]}),i);this.setViewport(Object.assign({},I))}}}setViewPortDimensionSizes(t,e){let i=[...this.store.get("items")];const n=i.length;if(!n){return}let s=0;let r=0;let o=this.store.get("start");if(e){const t=this.getItems();const n=h(t);i=d(i,o,e,n.start)}while(r<n){const e=i[o];if(s){e.start+=s;e.end+=s}const c=t[e.itemIndex];if(c){const t=c-e.size;s+=t;e.size=c;e.end=e.start+c}o++;r++;if(o===n){o=0}}this.setViewport({items:[...i]})}setOriginalSizes(t){const e=this.store.get("items");const n=e.length;if(!n){return}i(this.store,{items:d(e,this.store.get("start"),t,this.lastCoordinate)})}getItems(){return{items:this.store.get("items"),start:this.store.get("start"),end:this.store.get("end")}}setViewport(t){i(this.store,t)}clearItems(){this.store.set("items",[])}}const b=10;const j=(t,e)=>(e===null||e===void 0?void 0:e.size)||(t.toString().length+1)*b;function I(t){return!!t.touches}function O(t,e){if(e&&t){if(!(t.target instanceof Element&&t.target.classList.contains(e))){return false}}return true}function S(t,e,i){if(I(t)){if(t.touches.length>0){const n=t.touches[0];if(!O(n,i)){return null}return n[e]||0}return null}return t[e]||0}export{x as V,j as c,S as g,O as v};
//# sourceMappingURL=events-a9d2c5b9.js.map