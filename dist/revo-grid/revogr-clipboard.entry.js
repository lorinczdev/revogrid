/*!
 * Built by Revolist
 */
import{r as t,c as s}from"./index-7fd83173.js";const e=class{constructor(e){t(this,e);this.pasteRegion=s(this,"pasteRegion",3);this.beforePaste=s(this,"beforepaste",7);this.beforePasteApply=s(this,"beforepasteapply",7);this.afterPasteApply=s(this,"afterpasteapply",7);this.beforeCut=s(this,"beforecut",7);this.clearRegion=s(this,"clearRegion",7);this.beforeCopy=s(this,"beforecopy",7);this.beforeCopyApply=s(this,"beforecopyapply",7);this.copyRegion=s(this,"copyRegion",3);this.readonly=undefined}onPaste(t){if(this.readonly){return}const s=this.getData(t);const e=s.types.indexOf("text/html")>-1;const i=e?s.getData("text/html"):s.getData("text");const r=s.getData("text");const n=this.beforePaste.emit({raw:i,dataText:r,isHTML:e,event:t});if(n.defaultPrevented){return}let o;if(n.detail.isHTML){const t=this.htmlParse(n.detail.raw);o=t||this.textParse(r)}else{o=this.textParse(n.detail.raw)}const h=this.beforePasteApply.emit({raw:i,parsed:o,event:t});if(h.defaultPrevented){return}this.pasteRegion.emit(h.detail.parsed);const a=this.afterPasteApply.emit({raw:i,parsed:o,event:t});if(a.defaultPrevented){return}t.preventDefault()}copyStarted(t){const s=this.beforeCopy.emit({event:t});if(s.defaultPrevented){return}const e=this.getData(s.detail.event);this.copyRegion.emit(e);t.preventDefault()}cutStarted(t){const s=this.beforeCut.emit({event:t});if(s.defaultPrevented){return}const e=this.getData(s.detail.event);this.copyStarted(t);if(this.readonly){return}this.clearRegion.emit(e);t.preventDefault()}async doCopy(t,s){const e=this.beforeCopyApply.emit({event:t,data:s});if(e.defaultPrevented){return}const i=s?this.parserCopy(s):"";t.setData("text/plain",i)}parserCopy(t){return t.map((t=>t.join("\t"))).join("\n")}textParse(t){const s=[];const e=t.split(/\r\n|\n|\r/);for(let t in e){s.push(e[t].split("\t"))}return s}htmlParse(t){const s=[];const e=document.createRange().createContextualFragment(t);const i=e.querySelector("table");if(!i){return null}for(const t of Array.from(i.rows)){s.push(Array.from(t.cells).map((t=>t.innerText)))}return s}getData(t){return t.clipboardData||(window===null||window===void 0?void 0:window.clipboardData)}};export{e as revogr_clipboard};
//# sourceMappingURL=revogr-clipboard.entry.js.map